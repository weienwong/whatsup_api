"use strict";angular.module("cLifeAngularApp",["ngAnimate","ngCookies","EventsFactory","ngResource","ngRoute","ngSanitize","ngTouch","angular-spinkit"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("cLifeAngularApp").controller("MainCtrl",["eventsFactory","$scope","$location","$anchorScroll","$rootScope",function(a,b,c,d,e){c.hash("top"),b.eventGroups=[{longName:"Job Info Sessions",shortName:"job_info"},{longName:"University Events",shortName:"uni_events"}];var f=[];f.push({value:"today",label:"Today"}),f.push({value:"week",label:"This Week"}),f.push({value:"this_month",label:"This Month"}),f.push({value:"next_month",label:"Next Month"}),b.timeDropdown=f,b.selectedJobInfoTime=f[2],a.getFaculties().success(function(a){console.log(a),b.facultiesDropdown=a,b.selectedFaculty=a[0],b.showJobInfoSession(b.selectedJobInfoTime.value,b.selectedFaculty.faculty_short)}),a.getEventCategories().success(function(a){b.eventCategories=[],b.eventCategories.push({id:0,category_name:"All Events"}),b.eventCategories.push.apply(b.eventCategories,a),b.selectedEventCategory=b.eventCategories[0]}),a.getOrganizers().success(function(a){b.organizers=[],b.organizers.push({id:0,name:"All"}),b.organizers.push.apply(b.organizers,a),b.selectedOrg=b.organizers[0]}),b.showJobInfoSession=function(c,d){a.getJobInfoSession(c,d).success(function(a){b.jobInfoSessionData=a})},b.jobInfoTimeSearch=function(a){b.selectedJobInfoTime=a,b.showJobInfoSession(b.selectedJobInfoTime.value,b.selectedFaculty.faculty_short)},b.jobInfoFacultySearch=function(a){b.selectedFaculty=a,b.showJobInfoSession(b.selectedJobInfoTime.value,b.selectedFaculty.faculty_short)},b.selectedEventGroup=b.eventGroups[0],b.selectEventGroup=function(a){b.selectedEventGroup=a,"job_info"===b.selectedEventGroup.shortName?b.showJobInfoSession(b.selectedJobInfoTime.value,b.selectedFaculty.faculty_short):"uni_events"===b.selectedEventGroup.shortName&&(b.selectedUniEventTime=b.selectedJobInfoTime,b.showUniversityEvents(b.selectedEventCategory.id,b.selectedUniEventTime.value))},b.showOneJobInfoSession=function(c){a.getOneJobInfoSession(c).success(function(a){b.moreJobInfoSessionData=a})},b.selectEventCategory=function(a){b.selectedEventCategory=a,console.log(b.selectedEventCategory),b.showUniversityEvents(b.selectedEventCategory.id,b.selectedUniEventTime.value)},b.selectUniEventTime=function(a){b.selectedUniEventTime=a,console.log(a),b.showUniversityEvents(b.selectedEventCategory.id,b.selectedUniEventTime.value)},b.showUniversityEvents=function(c,d){a.getUniversityEvents(c,d).success(function(a){b.allEvents=a})},b.showUniversityEventDetails=function(c){a.getUniversityEventsDetails(c).success(function(a){console.log(c),console.log(a),b.universityEventDetails=a})},b.emailModal=function(a){b.sentSuccess=0,"job_info"===b.selectedEventGroup.shortName?b.emailModalTitle="Send Calendar Invite for "+a.employer+" Job Info Session":"uni_events"===b.selectedEventGroup.shortName&&(b.emailModalTitle="Send Calendar Invite for "+a.name),b.eventId=a.id},b.sendEmail=function(c,d){"job_info"===b.selectedEventGroup.shortName?a.postSendJobInfoInvite(c,d).success(function(a){b.sentSuccess=1}):"uni_events"===b.selectedEventGroup.shortName&&a.postSendUniEventInvite(c,d).success(function(a){b.sentSuccess=1}).error(function(a){})},b.hideLater=1,b.showLaterWhenWhere=function(){b.showLater=1,b.hideLater=0},b.hideLaterWhenWhere=function(){b.showLater=0,b.hideLater=1},e.goToTop=function(){console.log("Go to top is called!"),"top"!==c.hash&&c.hash("top"),d.yOffset=50,d()}}]),angular.module("cLifeAngularApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);var eventsFactory=angular.module("EventsFactory",[]);eventsFactory.factory("eventsFactory",["$http",function(a){var b="/api/v2/";return eventsFactory.getEventByCategory=function(c){return a.get(b+"/event_category/"+c)},eventsFactory.getJobInfoSession=function(c,d){return a.get(b+"job_info_sessions?time="+c+"&faculty="+d)},eventsFactory.getOneJobInfoSession=function(c){return a.get(b+"job_info_sessions/"+c)},eventsFactory.getEventCategories=function(){return a.get(b+"event_categories")},eventsFactory.getEventsByCategoryId=function(b){return a.get("/event_category/"+b)},eventsFactory.getUniversities=function(){return a.get("http://localhost:3000/universities")},eventsFactory.getFaculties=function(){return a.get(b+"faculties")},eventsFactory.getStudentType=function(){return a.get("/student_types")},eventsFactory.getJobInfoSessionCountByTime=function(){return a.get("/job_info_sessions_count")},eventsFactory.getOrganizers=function(){return a.get(b+"sites")},eventsFactory.getUniversityEvents=function(c,d){return a.get(b+"university_events/"+c+"/"+d)},eventsFactory.getUniversityEventsDetails=function(c){return a.get(b+"university_event/"+c)},eventsFactory.postSendUniEventInvite=function(c,d){return a({method:"POST",url:b+"uni_event_invite/",data:"email="+c+"&uni_event_id="+d,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},eventsFactory.postSendJobInfoInvite=function(c,d){return a({method:"POST",url:b+"job_info_invite/",data:"email="+c+"&job_info_id="+d,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},eventsFactory}]);